@model Application.Features.Products.Queries.GetById.GetProductByIdQueryResponse
@{
    ViewData["Title"] = Model.Name;
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Home</a></li>
        <li class="breadcrumb-item"><a href="@Url.Action("Index", "Products")">Products</a></li>
        <li class="breadcrumb-item active">@Model.Name</li>
    </ol>
</nav>

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <img src="@(string.IsNullOrEmpty(Model.ImageUrl) ? "/images/no-image.jpg" : $"/images/{Model.ImageUrl}")" 
                 class="card-img-top" alt="@Model.Name" style="height: 400px; object-fit: cover;" />
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h1 class="card-title h2">@Model.Name</h1>
                    @if((User?.Identity?.IsAuthenticated ?? false) && User.IsInRole(nameof(Domain.Enums.UserRole.Admin)))
                    {
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-cog"></i>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" asp-action="Edit" asp-route-id="@Model.Id">
                                <i class="fas fa-edit me-2"></i>Edit
                            </a></li>
                            <li><a class="dropdown-item text-danger" asp-action="Delete" asp-route-id="@Model.Id">
                                <i class="fas fa-trash me-2"></i>Delete
                            </a></li>
                        </ul>
                    </div>
                    }
                </div>
                
                <div class="mb-3">
                    <span class="category-badge me-2">@string.Join(", ", Model.Categories.Select(c => c.Name))</span>
                    @if (Model.UnitsInStock > 0)
                    {
                        <span class="badge bg-success">In Stock</span>
                    }
                    else
                    {
                        <span class="badge bg-danger">Out of Stock</span>
                    }
                </div>
                
                <div class="mb-4">
                    <span class="price-badge fs-3">$@Model.Price.Amount</span>
                </div>
                
                <div class="mb-4">
                    <h5>Description</h5>
                    <p class="text-muted">@Model.Description</p>
                </div>
                
                <div class="mb-4">
                    <div class="row">
                        @* <div class="col-6">
                            <strong>SKU:</strong> @Model.SKU
                        </div> *@
                        <div class="col-6">
                            <strong>Stock:</strong> @Model.UnitsInStock units
                        </div>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    @if (Model.UnitsInStock > 0)
                    {
                        <form asp-controller="Carts" asp-action="AddItem" >
                            <input type="hidden" name="productId" asp-for="@Model.Id">
                            <input type="submit" value="Add To Cart" class="fas fa-shopping-cart me-2">
                        </form>
                        @* <button type="button" class="btn btn-success">
                            <i class="fas fa-bolt me-2"></i>Buy Now
                        </button> *@
                    }
                    else
                    {
                        <button type="button" class="btn btn-secondary" disabled>
                            <i class="fas fa-times me-2"></i>Out of Stock
                        </button>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Product Information Tabs -->
<div class="mt-5">
    <ul class="nav nav-tabs" id="productTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button">
                Details
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button">
                Reviews
            </button>
        </li>
        @* <li class="nav-item" role="presentation">
            <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" data-bs-target="#shipping" type="button">
                Shipping
            </button>
        </li> *@
    </ul>
    
    <div class="tab-content" id="productTabsContent">
        <div class="tab-pane fade show active" id="details" role="tabpanel">
            <div class="card">
                <div class="card-body">
                    <h5>Product Details</h5>
                    <p>@Model.Description</p>
                    <ul>
                        @* <li>SKU: @Model.SKU</li> *@
                        <li>Category: @string.Join(", ", Model.Categories.Select(c => c.Name))</li>
                        <li>Stock Quantity: @Model.UnitsInStock</li>
                        @* <li>Created: @Model.CreatedDate.ToString("MMMM dd, yyyy")</li> *@
                    </ul>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="reviews" role="tabpanel">
            <div class="card">
                <div class="card-body">
                    <h5>Customer Reviews</h5>
                    <p class="text-muted">No reviews yet. Be the first to review this product!</p>
                </div>
            </div>
        </div>
        @* <div class="tab-pane fade" id="shipping" role="tabpanel">
            <div class="card">
                <div class="card-body">
                    <h5>Shipping Information</h5>
                    <ul>
                        <li>Free shipping on orders over $50</li>
                        <li>Standard delivery: 3-5 business days</li>
                        <li>Express delivery: 1-2 business days</li>
                    </ul>
                </div>
            </div>
        </div> *@
    </div>
</div>